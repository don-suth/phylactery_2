{% extends "_base.html" %}
{% load crispy_forms_tags %}

{% block form_media %}
	{{ wizard.form.media }}
{% endblock %}

{% block content %}
	<p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
	{% if preview_data %}
		<legend>Please make sure this information is correct:</legend>
		<table class="table preview-data-table">
			<tbody>
				<tr>
					<th scope="row">Short Name:</th>
					<td>{{ preview_data.short_name }}</td>
				</tr>
				<tr>
					<th scope="row">Long Name:</th>
					<td>{{ preview_data.long_name }}</td>
				</tr>
				<tr>
					<th scope="row">Pronouns:</th>
					<td>{{ preview_data.pronouns }}</td>
				</tr>
				<tr>
					<th scope="row">Email:</th>
					<td>{{ preview_data.email_address }}</td>
				</tr>
				<tr>
					<th scope="row">Is Guild?:</th>
					<td>{{ preview_data.is_guild|yesno:"Yes,No" }}</td>
				</tr>
				<tr>
					<th scope="row">Is Student?:</th>
					<td>{{ preview_data.is_student|yesno:"Yes,No" }}</td>
				</tr>
				<tr>
					<th scope="row">Student Number:</th>
					<td>{{ preview_data.student_number|default:"---" }}</td>
				</tr>
				<tr>
					<th scope="row">Optional Emails:</th>
					<td>{{ preview_data.optional_emails|yesno:"Yes,No" }}</td>
				</tr>
				
				<th scope="row">Mailing Lists:</th>
				<td>
					{% if preview_data.mailing_groups %}
						<ul>
							{% for group in preview_data.mailing_groups %}
								<li>{{ group }}</li>
							{% endfor %}
						</ul>
					{% else %}
						None
				</td>
				{% endif %}
			</tbody>
		</table>
	{% endif %}
	<form action="" method="POST">
		{% csrf_token %}
		{{ wizard.management_form }}
		{% if wizard.form.forms %}
			{% for form in wizard.form.forms %}
				{% crispy form %}
			{% endfor %}
		{% else %}
			{% crispy wizard.form %}
		{% endif %}
		<div class="d-flex flex-row justify-content-between">
			<div class="p-2">
				{% if wizard.steps.prev %}
					<button name="wizard_goto_step"
							type="submit"
							value="{{ wizard.steps.prev }}"
							formnovalidate="formnovalidate"
							class="btn btn-secondary">
						<i class="bi-arrow-left"></i> Back
					</button>
				{% else %}
					<button type="button"
							class="btn btn-secondary"
							disabled>
						<i class="bi-arrow-left"></i> Back
					</button>
				{% endif %}
			</div>
			<div class="p-2">
				{% if wizard.steps.next %}
					<button type="submit"
							class="btn btn-primary">
						Next <i class="bi-arrow-right"></i>
					</button>
				{% else %}
					<button type="submit"
							class="btn btn-success">
						Submit <i class="bi-check2"></i>
					</button>
				{% endif %}
			</div>
		</div>
	</form>
{% endblock %}